<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {% seo %}
  <link rel="stylesheet" href="{{ "/assets/css/style.css" | relative_url }}">
  <link rel="alternate" type="application/rss+xml" title="{{ site.title | escape }}" href="{{ "/feed.xml" | relative_url }}">
  {% if jekyll.environment == 'production' and site.google_analytics %}
    {% include google-analytics.html %}
  {% endif %}
</head>
<body>
  <header class="site-header">
    <div class="wrapper">
      <a class="site-title" href="{{ "/" | relative_url }}">{{ site.title | escape }}</a>
      <nav class="site-nav">
        <a href="{{ "/" | relative_url }}"{% if page.url == "/" %} class="active"{% endif %}>Blog</a>
        <a href="{{ "/archive" | relative_url }}"{% if page.url == "/archive/" or page.url == "/archive" %} class="active"{% endif %}>Archive</a>
        <a href="{{ "/categories" | relative_url }}"{% if page.url == "/categories/" or page.url == "/categories" %} class="active"{% endif %}>Categories</a>
        <a href="{{ "/about" | relative_url }}"{% if page.url == "/about/" %} class="active"{% endif %}>About</a>
      </nav>
    </div>
  </header>

  <main class="page-content">
    <div class="wrapper">
      {{ content }}
    </div>
  </main>

  <footer class="site-footer">
    <div class="wrapper">
      <p>&copy; {{ site.time | date: '%Y' }} {{ site.author.name }}. Built with DevPilot.</p>
      <p>
        <a href="{{ "/atom.xml" | relative_url }}">RSS Feed</a> |
        <a href="https://twitter.com/{{ site.twitter_username }}">Twitter</a>
      </p>
    </div>
  </footer>

  <!-- Mermaid diagram rendering -->
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
    mermaid.initialize({
      startOnLoad: false,
      theme: 'base',
      themeVariables: {
        darkMode: false,
        background: '#ffffff',
        primaryColor: '#dbeafe',
        primaryTextColor: '#1e293b',
        primaryBorderColor: '#93c5fd',
        lineColor: '#64748b',
        secondaryColor: '#ede9fe',
        secondaryTextColor: '#1e293b',
        secondaryBorderColor: '#c4b5fd',
        tertiaryColor: '#dcfce7',
        tertiaryTextColor: '#1e293b',
        tertiaryBorderColor: '#86efac',
        noteBkgColor: '#fef9c3',
        noteTextColor: '#1e293b',
        noteBorderColor: '#fde047',
        actorBkg: '#dbeafe',
        actorTextColor: '#1e293b',
        actorBorder: '#93c5fd',
        signalColor: '#1e293b',
        signalTextColor: '#1e293b',
        labelBoxBkgColor: '#f1f5f9',
        labelBoxBorderColor: '#cbd5e1',
        labelTextColor: '#1e293b',
        loopTextColor: '#1e293b',
        activationBorderColor: '#93c5fd',
        activationBkgColor: '#eff6ff',
        sequenceNumberColor: '#ffffff',
        sectionBkgColor: '#f1f5f9',
        altSectionBkgColor: '#e2e8f0',
        sectionBkgColor2: '#f8fafc',
        taskBkgColor: '#dbeafe',
        taskTextColor: '#1e293b',
        taskBorderColor: '#93c5fd',
        taskTextLightColor: '#1e293b',
        taskTextOutsideColor: '#1e293b',
        activeTaskBkgColor: '#bfdbfe',
        activeTaskBorderColor: '#60a5fa',
        gridColor: '#e2e8f0',
        doneTaskBkgColor: '#dcfce7',
        doneTaskBorderColor: '#86efac',
        critBkgColor: '#fee2e2',
        critBorderColor: '#fca5a5',
        todayLineColor: '#3b82f6',
        nodeBkg: '#dbeafe',
        mainBkg: '#dbeafe',
        nodeBorder: '#93c5fd',
        clusterBkg: '#f8fafc',
        clusterBorder: '#cbd5e1',
        titleColor: '#1e293b',
        edgeLabelBackground: '#ffffff',
        nodeTextColor: '#1e293b',
        fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
        fontSize: '14px',
        quadrant1Fill: '#dbeafe',
        quadrant2Fill: '#dcfce7',
        quadrant3Fill: '#fef9c3',
        quadrant4Fill: '#ede9fe',
        quadrant1TextFill: '#1e293b',
        quadrant2TextFill: '#1e293b',
        quadrant3TextFill: '#1e293b',
        quadrant4TextFill: '#1e293b',
        quadrantPointFill: '#3b82f6',
        quadrantPointTextFill: '#1e293b',
        quadrantXAxisTextFill: '#475569',
        quadrantYAxisTextFill: '#475569',
        quadrantTitleFill: '#1e293b',
        quadrantInternalBorderStrokeFill: '#cbd5e1',
        quadrantExternalBorderStrokeFill: '#94a3b8',
        mindmap0BgColor: '#dbeafe',
        mindmap1BgColor: '#dcfce7',
        mindmap2BgColor: '#ede9fe',
        mindmap3BgColor: '#fef9c3',
        mindmap4BgColor: '#fee2e2',
        mindmap5BgColor: '#fce7f3',
        mindmap6BgColor: '#e0f2fe',
        mindmap7BgColor: '#f0fdf4',
        mindmap8BgColor: '#faf5ff',
        mindmap9BgColor: '#fffbeb'
      }
    });
    // Convert fenced code blocks with language-mermaid into mermaid diagrams
    document.querySelectorAll('pre > code.language-mermaid').forEach((codeBlock, i) => {
      const pre = codeBlock.parentElement;
      const div = document.createElement('div');
      div.className = 'mermaid';
      div.textContent = codeBlock.textContent;
      pre.parentElement.replaceChild(div, pre);
    });
    await mermaid.run();
  </script>
</body>
</html>

---
layout: default
title: Categories
permalink: /categories/
---

<div class="categories-page">

  <header class="page-header">
    <h1 class="page-title">Categories</h1>
    {% assign categories = site.posts | map: "categories" | flatten | uniq | sort %}
    <p class="page-subtitle">
      {{ categories.size }} categories across {{ site.posts | size }} posts
    </p>
  </header>

  <!-- Category quick-nav -->
  <nav class="category-nav">
    {% for cat in categories %}
      {% if cat != "" %}
      {% assign cat_count = 0 %}
      {% for post in site.posts %}
        {% if post.categories contains cat %}
          {% assign cat_count = cat_count | plus: 1 %}
        {% endif %}
      {% endfor %}
      <a href="#{{ cat | slugify }}" class="category-nav-item">
        {{ cat }} <span class="category-nav-count">{{ cat_count }}</span>
      </a>
      {% endif %}
    {% endfor %}
    <!-- Uncategorized -->
    {% assign uncat_count = 0 %}
    {% for post in site.posts %}
      {% if post.categories.size == 0 %}
        {% assign uncat_count = uncat_count | plus: 1 %}
      {% endif %}
    {% endfor %}
    {% if uncat_count > 0 %}
    <a href="#uncategorized" class="category-nav-item">
      uncategorized <span class="category-nav-count">{{ uncat_count }}</span>
    </a>
    {% endif %}
  </nav>

  <!-- Category sections -->
  {% for cat in categories %}
    {% if cat != "" %}
    <section class="category-section" id="{{ cat | slugify }}">
      <h2 class="category-section-title">
        {{ cat }}
        {% assign cat_posts = site.posts | where_exp: "post", "post.categories contains cat" %}
        <span class="category-section-count">{{ cat_posts.size }} posts</span>
      </h2>
      <div class="category-posts">
        {% for post in cat_posts %}
        <article class="category-post">
          <div class="category-post-date">
            <time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%b %-d, %Y" }}</time>
          </div>
          <div class="category-post-body">
            <h3><a href="{{ post.url | relative_url }}">{{ post.title | escape }}</a></h3>
            {%- if post.excerpt -%}
              <p class="category-post-excerpt">{{ post.excerpt | strip_html | truncatewords: 30 }}</p>
            {%- endif -%}
            {% if post.tags.size > 0 %}
            <div class="category-post-tags">
              {% for tag in post.tags %}
                <span class="tag-sm">{{ tag }}</span>
              {% endfor %}
            </div>
            {% endif %}
          </div>
        </article>
        {% endfor %}
      </div>
    </section>
    {% endif %}
  {% endfor %}

  <!-- Uncategorized posts -->
  {% if uncat_count > 0 %}
  <section class="category-section" id="uncategorized">
    <h2 class="category-section-title">
      Uncategorized
      <span class="category-section-count">{{ uncat_count }} posts</span>
    </h2>
    <div class="category-posts">
      {% for post in site.posts %}
        {% if post.categories.size == 0 %}
        <article class="category-post">
          <div class="category-post-date">
            <time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%b %-d, %Y" }}</time>
          </div>
          <div class="category-post-body">
            <h3><a href="{{ post.url | relative_url }}">{{ post.title | escape }}</a></h3>
            {%- if post.excerpt -%}
              <p class="category-post-excerpt">{{ post.excerpt | strip_html | truncatewords: 30 }}</p>
            {%- endif -%}
            {% if post.tags.size > 0 %}
            <div class="category-post-tags">
              {% for tag in post.tags %}
                <span class="tag-sm">{{ tag }}</span>
              {% endfor %}
            </div>
            {% endif %}
          </div>
        </article>
        {% endif %}
      {% endfor %}
    </div>
  </section>
  {% endif %}

  <div class="back-link">
    <a href="{{ "/" | relative_url }}">&larr; Back to blog</a>
  </div>

</div>
